import{u as d,r as t,o as g,a as L,h as C,s as T,b as y,l,S as c,c as P,d as n,g as h,e as B,p as E}from"./handlers-BaI-749l.js";import{i}from"./vendor-common-5-8n_O84.js";function a(s,o){t.cartTotalItems&&(t.cartTotalItems.textContent=s),t.cartTotalPrice&&(t.cartTotalPrice.textContent=`$${o.toFixed(2)}`)}async function u(){y();const s=l(c.CART)||[];if(P(),s.length===0){t.productsList&&(t.productsList.innerHTML='<li class="cart-empty-message">Your cart is empty.</li>'),a(0,0),n();return}try{const o=s.map(r=>h(r)),e=await Promise.all(o);B(e);const p=e.length,m=e.reduce((r,f)=>r+f.price,0);a(p,m)}catch{i.error({title:"Error",message:"Failed to load cart products."}),a(0,0)}finally{n()}}function I(){(l(c.CART)||[]).length>0?(i.success({title:"Success",message:"Products purchased successfully!",position:"topRight"}),E(c.CART,[]),u(),d()):i.info({title:"Info",message:"Your cart is empty.",position:"topRight"})}function S(){d(),u(),t.productsList&&t.productsList.addEventListener("click",g),t.modalActions&&t.modalActions.addEventListener("click",L),t.cartBuyBtn&&t.cartBuyBtn.addEventListener("click",I),t.scrollUpBtn&&(window.addEventListener("scroll",C),t.scrollUpBtn.addEventListener("click",T))}document.addEventListener("DOMContentLoaded",S);
