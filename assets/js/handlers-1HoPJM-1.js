import{i}from"./vendor-common-5-8n_O84.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(s){if(s.ep)return;s.ep=!0;const c=r(s);fetch(s.href,c)}})();const p="https://dummyjson.com",d={CART:"cart",WISHLIST:"wishlist",THEME:"theme"};async function f(o){if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return o.json()}async function v(o=1,t=12){const r=(o-1)*t,n=await fetch(`${p}/products?limit=${t}&skip=${r}`);return f(n)}async function P(o){const t=await fetch(`${p}/products/${o}`);return f(t)}async function C(o,t=1,r=12){const n=(t-1)*r,s=await fetch(`${p}/products/search?q=${o}&limit=${r}&skip=${n}`);return f(s)}async function A(){const o=await fetch(`${p}/products/category-list`);return f(o)}async function M(o,t=1,r=12){const n=(t-1)*r,s=await fetch(`${p}/products/category/${o}?limit=${r}&skip=${n}`);return f(s)}const e={loader:document.querySelector(".loader"),scrollUpBtn:document.querySelector(".scroll-up"),themeSwitcher:document.querySelector(".theme-switcher"),searchForm:document.querySelector(".search-form"),searchInput:document.querySelector(".search-form__input"),searchClearBtn:document.querySelector(".search-form__btn-clear"),wishlistCount:document.querySelector(".nav__count--wishlist"),cartCount:document.querySelector(".nav__count--cart"),productsList:document.querySelector("ul.products"),categoriesList:document.querySelector("ul.categories"),loadMoreBtn:document.querySelector(".load-more"),notFoundMessage:document.querySelector(".not-found"),modal:document.querySelector(".modal"),modalProduct:document.querySelector(".modal-product"),modalCloseBtn:document.querySelector(".modal__close-btn"),modalActions:document.querySelector(".modal-product__actions"),cartTotalItems:document.querySelector(".cart-summary__items-value"),cartTotalPrice:document.querySelector(".cart-summary__total-value"),cartBuyBtn:document.querySelector(".cart-summary__buy-btn")};function w(){e.productsList&&(e.productsList.innerHTML="")}function F(o){if(!e.categoriesList)return;const t=o.map(n=>`
    <li class="categories__item">
      <button class="categories__btn" type="button">${n}</button>
    </li>
  `).join("");e.categoriesList.innerHTML=t;const r=e.categoriesList.querySelector("button");r&&r.classList.add("categories__btn--active")}function S(o){if(!e.productsList)return;const t=o.map(({id:r,title:n,brand:s,category:c,price:l,thumbnail:_})=>`
    <li class="products__item" data-id="${r}">
        <img class="products__image" src="${_}" alt="${n}"/>
        <div class="products__info">
            <h3 class="products__title">${n}</h3>
            <p class="products__brand"><span class="products__brand--bold">Brand:</span> ${s}</p>
            <p class="products__category">Category: ${c}</p>
            <p class="products__price">Price: $${l}</p>
        </div>
    </li>
  `).join("");e.productsList.insertAdjacentHTML("beforeend",t)}function q(o){if(!e.modalProduct)return;const{title:t,description:r,price:n,thumbnail:s,shippingInformation:c,returnPolicy:l}=o,_=`
    <img class="modal-product__img" src="${s}" alt="${t}" />
      <div class="modal-product__content">
        <h2 class="modal-product__title">${t}</h2>
        <div class="modal-product__details">
            <p class="modal-product__price">Price: $${n}</p>
            <p class="modal-product__description">${r}</p>
            <p class="modal-product__shipping-information"><b>Shipping:</b> ${c}</p>
            <p class="modal-product__return-policy"><b>Return Policy:</b> ${l}</p>
        </div>
      </div>
    `;e.modalProduct.innerHTML=_}function $(o){o.code==="Escape"&&L()}function B(o){o.currentTarget===o.target&&L()}function k(){e.modal&&(e.modal.classList.add("modal--is-open"),document.body.style.overflow="hidden",document.addEventListener("keydown",$),e.modal.addEventListener("click",B))}function L(){e.modal&&(e.modal.classList.remove("modal--is-open"),document.body.style.overflow="auto",document.removeEventListener("keydown",$),e.modal.removeEventListener("click",B))}e.modalCloseBtn&&e.modalCloseBtn.addEventListener("click",L);const T=(o,t)=>{try{const r=JSON.stringify(t);localStorage.setItem(o,r)}catch(r){console.error("Set state error: ",r.message)}},u=o=>{try{const t=localStorage.getItem(o);return t===null?void 0:JSON.parse(t)}catch(t){console.error("Get state error: ",t.message)}};function h(){e.loader&&e.loader.classList.remove("hidden")}function g(){e.loader&&e.loader.classList.add("hidden")}function H(){e.scrollUpBtn&&(window.scrollY>300?e.scrollUpBtn.classList.add("show"):e.scrollUpBtn.classList.remove("show"))}function O(){window.scrollTo({top:0,behavior:"smooth"})}function x(){document.body.classList.toggle("dark-theme");const o=document.body.classList.contains("dark-theme");T(d.THEME,o?"dark":"light")}function W(){u(d.THEME)==="dark"?document.body.classList.add("dark-theme"):document.body.classList.remove("dark-theme")}let a=1,m="All",y="";function E(){const o=u(d.CART)||[],t=u(d.WISHLIST)||[];e.cartCount&&(e.cartCount.textContent=o.length),e.wishlistCount&&(e.wishlistCount.textContent=t.length)}function I(o){const t=Number(o),r=u(d.CART)||[],n=u(d.WISHLIST)||[],s=e.modal.querySelector(".modal-product__btn--cart"),c=e.modal.querySelector(".modal-product__btn--wishlist");!s||!c||(s.dataset.id=t,c.dataset.id=t,s.textContent=r.includes(t)?"Remove from Cart":"Add to Cart",c.textContent=n.includes(t)?"Remove from Wishlist":"Add to Wishlist")}function b(o,t,r,n){let s=u(o)||[];s.includes(t)?(s=s.filter(c=>c!==t),r.textContent=`Add to ${n}`,i.info({title:"Removed",message:`Product removed from ${n}.`,position:"topRight"})):(s.push(t),r.textContent=`Remove from ${n}`,i.success({title:"Added",message:`Product added to ${n}.`,position:"topRight"})),T(o,s),E()}async function j(o){const t=o.target.closest(".products__item");if(!t)return;const r=t.dataset.id;h();try{const n=await P(r);q(n),I(r),k()}catch{i.error({title:"Error",message:"Failed to fetch product details."})}finally{g()}}function U(o){const t=o.target.closest(".modal-product__btn");if(!t)return;const r=Number(t.dataset.id);r&&(t.classList.contains("modal-product__btn--cart")?b(d.CART,r,t,"Cart"):t.classList.contains("modal-product__btn--wishlist")&&b(d.WISHLIST,r,t,"Wishlist"))}async function N(o){const t=o.target.closest(".categories__btn");if(!t)return;const r=t.textContent,n=document.querySelector(".categories__btn--active");n&&n.classList.remove("categories__btn--active"),t.classList.add("categories__btn--active"),w(),a=1,m=r,y="",e.loadMoreBtn&&(e.loadMoreBtn.style.display="block"),e.notFoundMessage&&e.notFoundMessage.classList.remove("not-found--visible"),h();try{const s=r==="All"?await v(a):await M(r,a);s.products.length===0?(e.notFoundMessage&&e.notFoundMessage.classList.add("not-found--visible"),e.loadMoreBtn&&(e.loadMoreBtn.style.display="none")):(S(s.products),s.total<=a*12&&(e.loadMoreBtn&&(e.loadMoreBtn.style.display="none"),i.info({title:"Info",message:"You've reached the end of the product list.",position:"topRight"})))}catch{i.error({title:"Error",message:"Failed to fetch products."})}finally{g()}}async function Y(o){o.preventDefault();const t=e.searchInput.value.trim();if(t){w(),a=1,y=t,m="",e.loadMoreBtn&&(e.loadMoreBtn.style.display="block"),e.notFoundMessage&&e.notFoundMessage.classList.remove("not-found--visible"),h();try{const r=await C(t,a);r.products.length===0?(e.notFoundMessage&&e.notFoundMessage.classList.add("not-found--visible"),e.loadMoreBtn&&(e.loadMoreBtn.style.display="none")):(S(r.products),r.total<=a*12&&e.loadMoreBtn&&(e.loadMoreBtn.style.display="none"))}catch{i.error({title:"Error",message:"Failed to search for products."})}finally{g()}}}async function z(){a+=1,h();try{const o=y?await C(y,a):m==="All"||!m?await v(a):await M(m,a);S(o.products),(a-1)*12+o.products.length>=o.total&&(e.loadMoreBtn&&(e.loadMoreBtn.style.display="none"),i.info({title:"Info",message:"You've reached the end of the product list.",position:"topRight"}))}catch{i.error({title:"Error",message:"Failed to load more products."})}finally{g()}}export{d as S,W as a,U as b,h as c,w as d,g as e,S as f,P as g,H as h,N as i,Y as j,z as k,u as l,A as m,v as n,j as o,F as p,T as q,e as r,O as s,x as t,E as u};
