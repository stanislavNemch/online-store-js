import{i as d}from"./vendor-common-5-8n_O84.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(s){if(s.ep)return;s.ep=!0;const c=r(s);fetch(s.href,c)}})();const p="https://dummyjson.com",l={CART:"cart",WISHLIST:"wishlist"};async function f(o){if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return o.json()}async function C(o=1,e=12){const r=(o-1)*e,n=await fetch(`${p}/products?limit=${e}&skip=${r}`);return f(n)}async function P(o){const e=await fetch(`${p}/products/${o}`);return f(e)}async function b(o,e=1,r=12){const n=(e-1)*r,s=await fetch(`${p}/products/search?q=${o}&limit=${r}&skip=${n}`);return f(s)}async function F(){const o=await fetch(`${p}/products/category-list`);return f(o)}async function B(o,e=1,r=12){const n=(e-1)*r,s=await fetch(`${p}/products/category/${o}?limit=${r}&skip=${n}`);return f(s)}const t={loader:document.querySelector(".loader"),scrollUpBtn:document.querySelector(".scroll-up"),themeSwitcher:document.querySelector(".theme-switcher"),searchForm:document.querySelector(".search-form"),searchInput:document.querySelector(".search-form__input"),searchClearBtn:document.querySelector(".search-form__btn-clear"),wishlistCount:document.querySelector("[data-wishlist-count]"),cartCount:document.querySelector("[data-cart-count]"),productsList:document.querySelector("ul.products"),categoriesList:document.querySelector("ul.categories"),loadMoreBtn:document.querySelector(".load-more"),notFoundMessage:document.querySelector(".not-found"),modal:document.querySelector(".modal"),modalProduct:document.querySelector(".modal-product"),modalCloseBtn:document.querySelector(".modal__close-btn"),modalActions:document.querySelector(".modal-product__actions"),cartTotalItems:document.querySelector("[data-count]"),cartTotalPrice:document.querySelector("[data-price]"),cartBuyBtn:document.querySelector(".cart-summary__btn")};function M(){t.productsList&&(t.productsList.innerHTML="")}function E(o){if(!t.categoriesList)return;const e=o.map(n=>`
    <li class="categories__item">
      <button class="categories__btn" type="button">${n}</button>
    </li>
  `).join("");t.categoriesList.innerHTML=e;const r=t.categoriesList.querySelector("button");r&&r.classList.add("categories__btn--active")}function L(o){if(!t.productsList)return;const e=o.map(({id:r,title:n,brand:s,category:c,price:i,thumbnail:_})=>`
    <li class="products__item" data-id="${r}">
        <img class="products__image" src="${_}" alt="${n}"/>
        <div class="products__info">
            <h3 class="products__title">${n}</h3>
            <p class="products__brand"><span class="products__brand--bold">Brand:</span> ${s}</p>
            <p class="products__category">Category: ${c}</p>
            <p class="products__price">Price: $${i}</p>
        </div>
    </li>
  `).join("");t.productsList.insertAdjacentHTML("beforeend",e)}function q(o){if(!t.modalProduct)return;const{title:e,description:r,price:n,thumbnail:s,shippingInformation:c,returnPolicy:i}=o,_=`
    <img class="modal-product__img" src="${s}" alt="${e}" />
      <div class="modal-product__content">
        <h2 class="modal-product__title">${e}</h2>
        <div class="modal-product__details">
            <p class="modal-product__price">Price: $${n}</p>
            <p class="modal-product__description">${r}</p>
            <p class="modal-product__shipping-information"><b>Shipping:</b> ${c}</p>
            <p class="modal-product__return-policy"><b>Return Policy:</b> ${i}</p>
        </div>
      </div>
    `;t.modalProduct.innerHTML=_}function w(o){o.code==="Escape"&&S()}function $(o){o.currentTarget===o.target&&S()}function T(){t.modal&&(t.modal.classList.add("modal--is-open"),document.body.style.overflow="hidden",document.addEventListener("keydown",w),t.modal.addEventListener("click",$))}function S(){t.modal&&(t.modal.classList.remove("modal--is-open"),document.body.style.overflow="auto",document.removeEventListener("keydown",w),t.modal.removeEventListener("click",$))}t.modalCloseBtn&&t.modalCloseBtn.addEventListener("click",S);const R=(o,e)=>{try{const r=JSON.stringify(e);localStorage.setItem(o,r)}catch(r){console.error("Set state error: ",r.message)}},m=o=>{try{const e=localStorage.getItem(o);return e===null?void 0:JSON.parse(e)}catch(e){console.error("Get state error: ",e.message)}};function g(){t.loader&&t.loader.classList.remove("hidden"),t.loadMoreBtn&&t.loadMoreBtn.classList.add("hidden")}function y(){t.loader&&t.loader.classList.add("hidden")}function H(){t.scrollUpBtn&&(window.scrollY>300?t.scrollUpBtn.classList.add("show"):t.scrollUpBtn.classList.remove("show"))}function O(){window.scrollTo({top:0,behavior:"smooth"})}let a=1,u="All",h="";function I(){const o=m(l.CART)||[],e=m(l.WISHLIST)||[];t.cartCount&&(t.cartCount.textContent=o.length,t.cartCount.dataset.cartCount=o.length),t.wishlistCount&&(t.wishlistCount.textContent=e.length,t.wishlistCount.dataset.wishlistCount=e.length)}function k(o){const e=Number(o),r=m(l.CART)||[],n=m(l.WISHLIST)||[],s=t.modal.querySelector(".modal-product__btn--cart"),c=t.modal.querySelector(".modal-product__btn--wishlist");!s||!c||(s.dataset.id=e,c.dataset.id=e,s.textContent=r.includes(e)?"Remove from Cart":"Add to Cart",c.textContent=n.includes(e)?"Remove from Wishlist":"Add to Wishlist")}function v(o,e,r,n){let s=m(o)||[];s.includes(e)?(s=s.filter(c=>c!==e),r.textContent=`Add to ${n}`,d.info({title:"Removed",message:`Product removed from ${n}.`,position:"topRight"})):(s.push(e),r.textContent=`Remove from ${n}`,d.success({title:"Added",message:`Product added to ${n}.`,position:"topRight"})),R(o,s),I()}async function x(o){const e=o.target.closest(".products__item");if(!e)return;const r=e.dataset.id;g();try{const n=await P(r);q(n),k(r),T()}catch{d.error({title:"Error",message:"Failed to fetch product details."})}finally{y()}}function W(o){const e=o.target.closest(".modal-product__btn");if(!e)return;const r=Number(e.dataset.id);r&&(e.classList.contains("modal-product__btn--cart")?v(l.CART,r,e,"Cart"):e.classList.contains("modal-product__btn--wishlist")&&v(l.WISHLIST,r,e,"Wishlist"))}async function j(o){const e=o.target.closest(".categories__btn");if(!e)return;const r=e.textContent,n=document.querySelector(".categories__btn--active");n&&n.classList.remove("categories__btn--active"),e.classList.add("categories__btn--active"),M(),a=1,u=r,h="",t.loadMoreBtn&&t.loadMoreBtn.classList.remove("hidden"),t.notFoundMessage&&t.notFoundMessage.classList.remove("not-found--visible"),g();try{const s=r==="All"?await C(a):await B(r,a);s.products.length===0?(t.notFoundMessage&&t.notFoundMessage.classList.add("not-found--visible"),t.loadMoreBtn&&t.loadMoreBtn.classList.remove("hidden")):(L(s.products),(a-1)*12+s.products.length<s.total?t.loadMoreBtn&&t.loadMoreBtn.classList.remove("hidden"):t.loadMoreBtn&&t.loadMoreBtn.classList.add("hidden"))}catch{d.error({title:"Error",message:"Failed to fetch products."})}finally{y()}}async function U(o){o.preventDefault();const e=t.searchInput.value.trim();if(e){M(),a=1,h=e,u="",t.loadMoreBtn&&t.loadMoreBtn.classList.remove("hidden"),t.notFoundMessage&&t.notFoundMessage.classList.remove("not-found--visible"),g();try{const r=await b(e,a);r.products.length===0?(t.notFoundMessage&&t.notFoundMessage.classList.add("not-found--visible"),t.loadMoreBtn&&t.loadMoreBtn.classList.remove("hidden")):(L(r.products),(a-1)*12+r.products.length<r.total?t.loadMoreBtn&&t.loadMoreBtn.classList.remove("hidden"):t.loadMoreBtn&&t.loadMoreBtn.classList.add("hidden"))}catch{d.error({title:"Error",message:"Failed to search for products."})}finally{y()}}}async function N(){a+=1,g();try{const o=h?await b(h,a):u==="All"||!u?await C(a):await B(u,a);L(o.products),(a-1)*12+o.products.length>=o.total?d.info({title:"Info",message:"You've reached the end of the product list.",position:"topRight"}):t.loadMoreBtn&&t.loadMoreBtn.classList.remove("hidden")}catch{d.error({title:"Error",message:"Failed to load more products."})}finally{y()}}export{l as S,W as a,g as b,M as c,y as d,L as e,j as f,P as g,H as h,U as i,N as j,F as k,m as l,C as m,E as n,x as o,R as p,t as r,O as s,I as u};
